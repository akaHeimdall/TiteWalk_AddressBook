/*
 * jLayout JQuery Plugin v0.17
 *
 * Licensed under the new BSD License.
 * Copyright 2008-2009 Bram Stein
 * All rights reserved.
 */
if(jQuery&&jLayout){(function(b){function a(e,c){var d={};b.each(["min","max"],function(g,f){d[f+"imumSize"]=function(i){var h=e.data("jlayout");if(h){return h[f+"imum"](d)}else{return e[f+"Size"](i)}}});b.extend(d,{doLayout:function(){var f=e.data("jlayout");if(f){f.layout(d)}e.css({position:"absolute"})},isVisible:function(){return e.isVisible()},insets:function(){var g=e.padding(),f=e.border();return{top:g.top,bottom:g.bottom+f.bottom+f.top,left:g.left,right:g.right+f.right+f.left}},bounds:function(g){var f={};if(g){if(typeof g.x==="number"){f.left=g.x}if(typeof g.y==="number"){f.top=g.y}if(typeof g.width==="number"){f.width=(g.width-(e.outerWidth(true)-e.width()));f.width=(f.width>=0)?f.width:0}if(typeof g.height==="number"){f.height=g.height-(e.outerHeight(true)-e.height());f.height=(f.height>=0)?f.height:0}e.css(f);return e}else{f=e.position();return{x:f.left,y:f.top,width:e.outerWidth(false),height:e.outerHeight(false)}}},preferredSize:function(){var i,j,h=e.margin(),g={width:0,height:0},f=e.data("jlayout");if(f&&c){g=f.preferred(d);i=d.minimumSize();j=d.maximumSize();g.width+=h.left+h.right;g.height+=h.top+h.bottom;if(g.width<i.width||g.height<i.height){g.width=Math.max(g.width,i.width);g.height=Math.max(g.height,i.height)}else{if(g.width>j.width||g.height>j.height){g.width=Math.min(g.width,j.width);g.height=Math.min(g.height,j.height)}}}else{g=d.bounds();g.width+=h.left+h.right;g.height+=h.top+h.bottom}return g}});return d}b.fn.layout=function(c){var d=b.extend({},b.fn.layout.defaults,c);return b.each(this,function(){var f=b(this),g=b.metadata&&f.metadata().layout?b.extend(d,f.metadata().layout):d,e=a(f,g.resize);if(g.type==="border"&&typeof jLayout.border!=="undefined"){b.each(["north","south","west","east","center"],function(j,h){if(f.children().hasClass(h)){g[h]=a(f.children("."+h+":first"))}});f.data("jlayout",jLayout.border(g))}else{if(g.type==="grid"&&typeof jLayout.grid!=="undefined"){g.items=[];f.children().each(function(h){if(!b(this).hasClass("ui-resizable-handle")){g.items[h]=a(b(this))}});f.data("jlayout",jLayout.grid(g))}else{if(g.type==="flexGrid"&&typeof jLayout.flexGrid!=="undefined"){g.items=[];f.children().each(function(h){if(!b(this).hasClass("ui-resizable-handle")){g.items[h]=a(b(this))}});f.data("jlayout",jLayout.flexGrid(g))}else{if(g.type==="column"&&typeof jLayout.column!=="undefined"){g.items=[];f.children().each(function(h){if(!b(this).hasClass("ui-resizable-handle")){g.items[h]=a(b(this))}});f.data("jlayout",jLayout.column(g))}else{if(g.type==="flow"&&typeof jLayout.flow!=="undefined"){g.items=[];f.children().each(function(h){if(!b(this).hasClass("ui-resizable-handle")){g.items[h]=a(b(this))}});f.data("jlayout",jLayout.flow(g))}}}}}if(g.resize){e.bounds(e.preferredSize())}e.doLayout();f.css({position:"relative"});if(b.ui!==undefined){f.addClass("ui-widget")}})};b.fn.layout.defaults={resize:true,type:"grid"}})(jQuery)};